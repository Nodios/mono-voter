(this.webpackJsonpvoter=this.webpackJsonpvoter||[]).push([[0],{61:function(e,t,n){e.exports=n(89)},66:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(16),c=n.n(i),s=(n(66),n(13)),u=n(14),l=n(18),b=n(19),p=n(20),m=n(10),h=n(22),d=n(111),v=n(112),f=n(31),j=n(113),O=n(103),y=n(114),g=n(7);var w=Object(m.observer)(a=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"Welcome")}}]),t}(o.a.Component))||a,S=n(116),E=n(107),q=n(108),k=n(109),R=n(110),x=n(105),z=n(106),C=[{name:"home",pattern:"/"},{name:"questions",pattern:"/questions"}],I=new h.RouterState("notFound"),U=function e(){Object(s.a)(this,e),this.routerStore=new h.RouterStore(this,C,I),this.questionsStore=new ne(this)},N=n(11),_=n(23),V=n(17),G=(n(50),n(6)),B=n(45),D=n.n(B);D.a.initializeApp({apiKey:"AIzaSyBjqj1Ge9e3lgX1q3MeZCm8UzjQLa9qCwI",authDomain:"voter-ccc7c.firebaseapp.com",databaseURL:"https://voter-ccc7c.firebaseio.com",projectId:"voter-ccc7c",storageBucket:"voter-ccc7c.appspot.com",messagingSenderId:"112218268129",appId:"1:112218268129:web:26e0a5cc6531ca010ef2a0",measurementId:"G-G0TSSSZ1GL"});var L,W,F,T,Y,A,M,P,J,Q,Z,H,K=D.a,X=0,$=1,ee=2,te=(L=G.action.bound,W=G.action.bound,F=function(){function e(){var t=this;Object(s.a)(this,e),Object(_.a)(this,"questionState",T,this),Object(_.a)(this,"question",Y,this),Object(_.a)(this,"questionRef",A,this),Object(_.a)(this,"step",M,this),this._dbUnsubscriber=void 0,this._db=void 0,this.castVote=function(e){"yes"===e?t._submitVote("yes"):t._submitVote("no")},this._submitVote=function(e){K.firestore().runTransaction((function(n){return n.get(t.questionRef).then((function(a){var r=a.data()[e]+1;n.update(t.questionRef,Object(N.a)({},e,r))}))}))}}return Object(u.a)(e,[{key:"init",value:function(e){var t=this;this.step=e,this._dbUnsubscriber=K.firestore().collection("questions").where("step","==",e).limit(1).onSnapshot((function(e){if(1===e.size){t.questionRef=e.docs[0].ref;var n=e.docs[0].data();t.question=n,t.questionState=$}else t.questionState=ee,t.question=null}))}},{key:"dispose",value:function(){this._dbUnsubscriber&&(this._dbUnsubscriber(),this._dbUnsubscriber=null,console.log("disposed"))}}]),e}(),T=Object(V.a)(F.prototype,"questionState",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X}}),Y=Object(V.a)(F.prototype,"question",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(V.a)(F.prototype,"questionRef",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=Object(V.a)(F.prototype,"step",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(V.a)(F.prototype,"init",[L],Object.getOwnPropertyDescriptor(F.prototype,"init"),F.prototype),Object(V.a)(F.prototype,"dispose",[W],Object.getOwnPropertyDescriptor(F.prototype,"dispose"),F.prototype),F),ne=(P=function e(t){var n=this;Object(s.a)(this,e),Object(_.a)(this,"step",J,this);K.firestore().collection("steps").doc("k1UWLoF47u9t7jVu36aR").onSnapshot((function(e){var t=e.data();n.step=t.questionStep}))},J=Object(V.a)(P.prototype,"step",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P),ae=Object(m.inject)((function(e){return{viewStore:new te}}))(Q=Object(m.observer)(Q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.step;e.viewStore.init(t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.step,a=t.viewStore;e.step!==n&&(a.dispose(),a.init(n))}},{key:"componentWillUnmount",value:function(){this.props.viewStore.dispose()}},{key:"render",value:function(){var e,t=this.props,n=t.classes,a=t.viewStore,r=a.question,i=a.questionState,c=a.castVote;if(i<1)e=o.a.createElement("div",null,"Loading...");else if(i>1)e=o.a.createElement("div",null,"The end.");else{var s=r.yes+r.no,u=r.yes/s*100||0,l=r.no/s*100||0;e=o.a.createElement(O.a,null,o.a.createElement("h3",null,r.question),o.a.createElement(S.a,{variant:"extended",size:"large",color:"primary","aria-label":"Yes",className:n.margin,onClick:function(e){return c("yes")}},o.a.createElement(x.a,{className:n.extendedIcon})," Yes"),o.a.createElement(S.a,{variant:"extended",size:"large",color:"secondary","aria-label":"Yes",className:n.margin,onClick:function(e){return c("no")}},o.a.createElement(z.a,{className:n.extendedIcon})," No"),o.a.createElement("div",null,o.a.createElement(E.a,{className:n.card},o.a.createElement(q.a,{title:"Results"}),o.a.createElement(k.a,null,o.a.createElement(f.a,null,"Yes (",u.toFixed(0)," %)"),o.a.createElement(R.a,{color:"primary",variant:"determinate",value:u}),o.a.createElement(f.a,null,"No (",l.toFixed(0)," %)"),o.a.createElement(R.a,{color:"secondary",variant:"determinate",value:l})))))}return e}}]),t}(o.a.Component))||Q)||Q,re=Object(g.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(2)},card:{marginTop:e.spacing(2)}}}))(ae),oe=Object(m.inject)((function(e){return{viewStore:e.rootStore.questionsStore}}))(Z=Object(m.observer)(Z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.viewStore.step;return o.a.createElement(re,{step:e})}}]),t}(o.a.Component))||Z)||Z,ie={home:o.a.createElement(w,null),questions:o.a.createElement(oe,null)},ce=Object(m.inject)((function(e){return{routerStore:e.rootStore.routerStore}}))(H=Object(m.observer)(H=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(d.a,{position:"static"},o.a.createElement(v.a,null,o.a.createElement(f.a,{variant:"h6",className:e.title},o.a.createElement(j.a,{href:"/",color:"inherit"},"Voter")),o.a.createElement(j.a,{href:"/questions",color:"inherit"},"Quiz"))),o.a.createElement(O.a,{fixed:!0},o.a.createElement(y.a,{container:!0,justify:"center",alignContent:"center",xs:12},o.a.createElement(h.RouterView,{routerStore:this.props.routerStore,viewMap:ie}))))}}]),t}(o.a.Component))||H)||H,se=Object(g.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}))(ce);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=n(54),le=n(115),be=n(55),pe=Object(be.a)(),me=new U;new h.HistoryAdapter(me.routerStore,pe).observeRouterStateChanges();var he=Object(ue.a)();c.a.render(o.a.createElement(le.a,{theme:he},o.a.createElement(m.Provider,{rootStore:me},o.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[61,1,2]]]);
//# sourceMappingURL=main.a0160791.chunk.js.map